<html>
<head>
<style type="text/css">
body {
    margin: 0;
}
pre {
    margin: 0;
    font-family: monaco, "Courier New", Courier, monospace;
    line-height: 1.2;
    background: black;
    color: lightgray;
    width: 100%;
    height: 100%;
    overflow-y:auto;
}
</style>
</head>
<body>
    <pre id="log"></pre>
</body>

<script type="module" type="text/javascript">
    import { AnsiUp } from './ansi_up.js'
    window.AnsiUp = AnsiUp;
</script>

<script type="text/javascript">

    window.addEventListener("load", (event) => {
        var log = document.getElementById("log");
        var ansiup = new AnsiUp();
        ws = new WebSocket(`ws://${location.hostname || '172.24.1.188'}/log`);
        ws.onmessage = function (e) {
            log.insertAdjacentHTML('beforeend', ansiup.ansi_to_html(e.data));
            log.scrollTo({top: log.scrollHeight, behavior: "smooth"});
        };
    });

</script>
</html>
